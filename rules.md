# Gitブランチ管理規約

## 1. ブランチ構造
- `main`: 本番環境用のブランチ(直コミット禁止)
- `staging`: ステージング環境用のブランチ(直コミット禁止)
- `develop`: 開発環境用のブランチ(直コミット禁止)
- `feature/*`: 機能開発用のブランチ
- `bugfix/*`: バグ修正用のブランチ
- `hotfix/*`: 緊急修正用のブランチ

## 2. ブランチ命名規則
- 機能開発ブランチ: `feature/[課題番号]-[機能名]`
  - 例: `feature/123-user-authentication`
- バグ修正ブランチ: `bugfix/[課題番号]-[問題の簡単な説明]`
  - 例: `bugfix/124-login-error`
- 緊急修正ブランチ: `hotfix/[バージョン]-[問題の簡単な説明]`
  - 例: `hotfix/1.2.3-critical-security-fix`
- ドキュメント更新ブランチ: `docs/[更新内容の簡単な説明]`
  - 例: `docs/update-coding-rules`

## 3. ブランチのワークフロー
1. `develop`の最新化（`git pull`）を行う
2. `develop`から`feature/`を作成
3. 機能開発完了後、`develop`にプルリクエスト
4. レビュー後、`develop`に通常マージ
5. `bugfix/`は`develop`から作成し、修正後`develop`へ通常マージ
6. `hotfix/`は`main`から作成し、修正後`main`と`develop`の両方へ通常マージ
7. 1週間ごとに`develop`から`staging`に通常マージ
8. `staging`からプルリクエストを作成し、問題がなければ`main`にスカッシュマージ
9. リリース後、本番環境での動作確認を実施

## 4. コミットメッセージの規約
- フォーマット: `[種類]: [課題番号] [簡潔な説明]`
- 種類:
  - `feat`: 新機能
  - `fix`: バグ修正
  - `refactor`: リファクタリング
  - `docs`: ドキュメント更新

## 5. プルリクエストのルール
- 適切なレビュアーをアサイン
- 説明文に変更内容を明記
- CI/CDパイプラインのテストをパスすること
- 最低1人のレビュアーの承認が必要

## 6. マージ戦略
- `feature/`, `bugfix/`, `hotfix/`ブランチは`develop`にスカッシュマージ
- `develop`は`staging`ブランチに通常マージ
- `staging`は`main`ブランチにスカッシュマージ
- `docs/`ブランチは内容に応じて適切なマージ方法を選択

### マージの注意点
- スカッシュマージの際は、コミットメッセージが第4項の規約に従っていることを確認
- 通常マージ前には必ずコンフリクトがないことを確認
- マージ後は不要になったブランチを削除する